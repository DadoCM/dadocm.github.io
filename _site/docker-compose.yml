services:
  serve:
    image: jekyll/jekyll:4
    container_name: dadocm_serve
    ports:
      - "4000:4000"
    environment:
      - TZ=America/New_York
      - JEKYLL_ENV=development
    volumes:
      - .:/code
    working_dir: /code
    command: >
      bash -c "bundle install &&
               bundle exec jekyll serve --force_polling --config _config.yml --host 0.0.0.0"

  build:
    image: jekyll/jekyll:4
    container_name: dadocm_build
    environment:
      - TZ=America/New_York
      - JEKYLL_ENV=production
    volumes:
      - .:/code
    working_dir: /code
    command: >
      bash -c "bundle install &&
               bundle exec jekyll build --config _config.yml"